cargo-features = ["named-profiles"]

[workspace]
members = [
    "cli",
    "p2p",
    "snarker",
    "node/shared",
    "node/p2p",
    "node/lib",
    "node/snark",
    "node/wasm"
]

[profile.fuzz]
inherits = "release"
opt-level = 3
debug = 2
debug-assertions = true  # TODO: test and disable if too slow
overflow-checks = true
lto = false
panic = "abort"
incremental = false
codegen-units = 1

[patch.crates-io]
ark-ff = { git = "https://github.com/openmina/algebra", branch = "openmina" }
ark-ec = { git = "https://github.com/openmina/algebra", branch = "openmina" }
ark-poly = { git = "https://github.com/openmina/algebra", branch = "openmina" }
ark-serialize = { git = "https://github.com/openmina/algebra", branch = "openmina" }

[patch.'https://github.com/o1-labs/proof-systems']
mina-hasher = { git = "https://github.com/openmina/proof-systems", branch = "ledger-newtypes" }
mina-signer = { git = "https://github.com/openmina/proof-systems", branch = "ledger-newtypes" }
mina-curves = { git = "https://github.com/openmina/proof-systems", branch = "ledger-newtypes" }
o1-utils = { git = "https://github.com/openmina/proof-systems", branch = "ledger-newtypes" }
kimchi = { git = "https://github.com/openmina/proof-systems", branch = "ledger-newtypes" }
poly-commitment = { git = "https://github.com/openmina/proof-systems", branch = "ledger-newtypes" }
mina-poseidon = { git = "https://github.com/openmina/proof-systems", branch = "ledger-newtypes" }

